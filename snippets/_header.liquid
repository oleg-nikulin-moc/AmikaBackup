<header id="header" class="header animation {% if settings.header_behavior == "drop-over" and template == "index" %}over-carousel{% endif %}">
  {% include 'utility_bar' %}
  <div class="container-fluid">
    {% if settings.show_social_header %}
      <div class="top-header clearfix medium--hide small--hide">
        <div class="social-top">
          {% include 'social_links' %}
        </div>
      </div>
    {% endif %}
    <div class="header-wrapper">
      <div class="clearfix">
      	<div class="menu-mobile left hide medium-down--show one-fifth ac-navigation__left">
          {% include 'menu_mobile' %}
        </div>
        <div class="logo left one-fifth medium-down--three-fifths ac-navigation__logo">
          <a href="/"><img src="{{ "logo.png" | asset_url }}" alt="{{shop.name}}" /></a>
        </div>
        <nav class="main-menu left three-fifths medium-down--hide clearfix ac-nav--main">
          {% include 'menu_main' %}
        </nav>
        <div class="left one-fifth medium-down--one-fifth ac-nav--right">
          {% include 'top_utils' %}
        </div>
      </div>
      <div class="hide medium-down--show search clearfix">
        <form action="/search" method="get" class="search-form">
          <a href="#" onclick="$(this).parent().submit(); return false;">
<!--               <svg class="img" class="img" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 85.3 85.3"><defs><style>.cls-1{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:4px;}</style></defs><title>search</title><circle class="cls-1" cx="25.72" cy="164.86" r="32.36" transform="translate(-100.39 -64.03) rotate(-45)"/><line class="cls-1" x1="57.25" y1="57.25" x2="83.3" y2="83.3"/></svg> -->

              <svg class="search-icon" width="19px" height="20px" viewBox="0 0 19 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <!-- Generator: Sketch 48.2 (47327) - http://www.bohemiancoding.com/sketch -->
                  <desc>Created with Sketch.</desc>
                  <defs></defs>
                  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <g id="Mobile-Nav" transform="translate(-340.000000, -83.000000)" stroke="#000000">
                          <g id="Icon-/-Profile" transform="translate(337.000000, 80.000000)">
                              <g id="Group" transform="translate(4.000000, 4.000000)">
                                  <circle id="Oval" stroke-width="1.5" cx="7" cy="7" r="7"></circle>
                                  <path d="M16.4,17.4 L11.48,12.48" id="Line" stroke-width="1.5" stroke-linecap="square"></path>
                              </g>
                          </g>
                      </g>
                  </g>
              </svg>
          </a>
          <input type="text" name="q" placeholder="" />
          <input type="hidden" name="type" value="product" />
        </form>
      </div>
    </div>
  </div>
</header>

{% if settings.header_behavior == "drop" or settings.header_behavior == "drop-over" %}
	{% include '_header_drop' %}
{% endif %}

<div id="customer-logout" class="ac-popup" style="display: none;" class="" >
    <button type="button" class="ac-close__btn" data-close-popup-btn>x</button>
    <div class="ac-block--horizontal" data-login-message>
        <h2>logout</h2>
        <p class="ac-field__note ac-offset__bottom--md">are you sure you want to logout?</p>
    </div>
    <div style="text-align: center;" class="">
        <a class="ac-form__btn ac-form__btn--black animation" type="button" href="/account/logout">YES, LOGOUT</a>
        <button class="ac-form__btn" type="button" id="cancelLogoutBtn" data-close-popup-btn>NO</button>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        const logoutPopup = new tingle.modal({
            footer: false,
            stickyFooter: false,
            closeMethods: ['escape'],
            cssClass: ['ac-popup', 'ac-popup__logout', 'ac-popup--sm'],
            onOpen: function() {
                console.log('modal open');
            },
            onClose: function() {
                console.log('modal closed');
                return true;
            },
        });
        function toggleClass(elementSelector, className) {
            const element = document.querySelector(elementSelector);
            if (element) {
                element.classList.toggle(className);
                console.log('className', className)
            }
        }
        const accountButton = document.querySelector('[data-account-btn]');
        if (accountButton) {
            accountButton.addEventListener("click", function () {
                toggleClass('.ac-nav-right__item--account', 'opened');
            });
        }
        // function formResize(size) {
        //     const popups = document.querySelectorAll('.ac-popup');
        //     popups.forEach(popup => {
        //         if (size === "lg") {
        //             popup.classList.add('ac-popup--lg');
        //             popup.classList.remove('ac-popup--sm');
        //         } else if (size === "sm") {
        //             popup.classList.add('ac-popup--sm');
        //             popup.classList.remove('ac-popup--lg');
        //         } else {
        //             popup.classList.add('ac-popup--md');
        //             popup.classList.remove('ac-popup--lg');
        //             popup.classList.remove('ac-popup--sm');
        //         }
        //     });
        // }
        //
        // // set content
        const content = $('#customer-logout').html();
        logoutPopup.setContent( content );
        // open modal
        const logoutBtns = document.querySelectorAll('[data-logout-btn]');
        logoutBtns.forEach(logoutBtn => {
            logoutBtn.addEventListener("click", (event) => {
                formResize('sm');
                console.log("logoutBtn", logoutBtn);
                event.preventDefault();
                // formResize('lg');
                logoutPopup.open();
            });
        });
        const closePopups = document.querySelectorAll('[data-close-popup-btn]');
        closePopups.forEach(element => {
            element.addEventListener("click", (event) => {
            console.log(event)
            event.preventDefault();
            const elementsToRemove = document.querySelectorAll('.tingle-modal.tingle-modal--visible');
            elementsToRemove.forEach(element => {
                element.classList.remove('tingle-modal--visible');
                document.documentElement.classList.remove("tingle-enabled")
                })
            });
        });
    });
</script>
