{% schema %}
  {
    "name": "Mobile Full Width Image",
    "class": "carousel",
	"max_blocks": 1,
    "settings": [
      {
        "type": "header",
        "content": "General"
      },
	  {
        "type": "checkbox",
        "id": "full_width",
        "label": "Full width?",
        "default": true
      },
	  {
        "type": "text",
        "id": "img_height",
        "label": "Height (if not full)",
        "default": "45%"
      },
      {
        "type":    "range",
        "min":     0,
        "max":     4,
		"step":    1,
        "default": 4,
        "id": "text_size",
        "label": "Carousel Text Size",
		"info": "Set with vw instead of pixels so that it'll adjust according to the viewport width."
      }
    ],
    "blocks": [
      {
        "type": "slide",
        "name": "Image",
        "settings": [
		  {
            "type": "image_picker",
            "id": "image",
            "label": "Background Image"
          },
          {
            "type": "url",
            "id": "link",
            "label": "Link",
            "info": "Optional"
          },
          {
            "type": "checkbox",
            "id": "show_captions",
            "label": "Show captions?",
            "default": true
          },
		  {
            "type": "text",
            "id": "overlay_color",
            "label": "Background color (r,g,b,a)",
            "default": "0,0,0,0",
			"info": "0,0,0,0 for no background"
          },
          {
            "type": "header",
            "content": "Text 1"
          },
          {
            "type": "select",
            "id": "text_align",
            "label": "Text Alignment",
            "options": [
              {"value": "left", "label": "Left"},
			  {"value": "center", "label": "Center"},
			  {"value": "right", "label": "Right"}
            ],
            "default": "center"
          },
          {
            "type": "select",
            "id": "text_vertical_align",
            "label": "Text Vertical Alignment",
            "options": [
              {"value": "bottom", "label": "Bottom"},
			  {"value": "center", "label": "Center"},
			  {"value": "top", "label": "Top"}
            ],
            "default": "center"
          },
          {
            "type": "text",
            "id": "text_margin_left",
            "label": "Text margin left",
			"default": "0"
          },
		  {
            "type": "text",
            "id": "text_margin_right",
            "label": "Text margin right",
			"default": "0"
          },
          {
            "type": "text",
            "id": "title",
            "label": "Title",
			"default": "This is an Image"
          },
		  {
            "type": "richtext",
            "id": "text",
            "label": "Description",
			"default": "<p>Lorem ipsum dolor sit amet, consectur adipiscing elit. Nunc eu eros augue. Cras tempus finibus mi, at aliquet orci vestibulum sit amet.</p>"
          },
		  {
            "type": "text",
            "id": "button",
            "label": "Button",
			"default": "Button"
          },
		  {
            "type": "header",
            "content": "Featured Image"
          },
		  {
            "type": "image_picker",
            "id": "featured_image",
            "label": "Image"
          },
		  {
            "type": "text",
            "id": "featured_image_width",
            "label": "Width",
            "default": "25%"
          },
		  {
            "type": "text",
            "id": "featured_image_right",
            "label": "Right Coordinates",
            "default": "10%"
          },
		  {
            "type": "text",
            "id": "featured_image_left",
            "label": "Left Coordinates",
            "default": "auto"
          },
		  {
            "type": "select",
            "id": "featured_image_position",
            "label": "Alignment",
            "options": [
              {"value": "center top", "label": "Top"},
			  {"value": "center", "label": "Center"},
			  {"value": "center bottom", "label": "Bottom"}
            ],
            "default": "center"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Mobile Full Width Image",
        "category": "Image",
        "blocks": [
          {
            "type": "slide"
          }
        ]
      }
    ]
  }
{% endschema %}

<style>
  #shopify-section-{{ section.id }} .hero-carousel .slick-arrow {color: {{section.settings.arrow_color}};font-size:50px;text-shadow:0px 0px 1px #666;}
  .isNotMobile #shopify-section-{{ section.id }} .hero-carousel .slick-arrow:hover {color: {{section.settings.arrow_hover_color}};}
  .isNotMobile #shopify-section-{{ section.id }} .hero-carousel:hover .left-arrow{left:20px;opacity:1;}
  .isNotMobile #shopify-section-{{ section.id }} .hero-carousel:hover .right-arrow{right:20px;opacity:1;}
  #shopify-section-{{ section.id }} .hero-carousel .slick-dots{bottom:1px;}
  #shopify-section-{{ section.id }} .hero-carousel .slick-dots li button {background: {{section.settings.dots_color}}; border: 3px solid {{section.settings.dots_color}};box-shadow:0px 0px 1px 0px #666;}
  #shopify-section-{{ section.id }} .hero-carousel .slick-dots li.slick-active button {background: {{ section.settings.dots_active_color }}; border-color: {{ section.settings.dots_active_color }};}
  #shopify-section-{{ section.id }} .hero-carousel .item_img.normal {padding-top: {{section.settings.img_height}};}
  #shopify-section-{{ section.id }} .hero-carousel .mobile-image{display:none;}
  @media all and (min-width: 601px) and (max-width: 900px) {
    /*#shopify-section-{{ section.id }} .hero-carousel .item_img.normal {padding-top: 70%;}*/
  }
  @media all and (max-width: 600px) {
    #shopify-section-{{ section.id }} {display:block}
    #shopify-section-{{ section.id }} .hero-carousel .item_img.normal {padding-top: 114%;}
    #shopify-section-{{ section.id }} .hero-carousel .featured-img.desktop-image {position: static; margin: auto; width: 50% !important; height: auto; padding-top: 50%;}
    #shopify-section-{{ section.id }} .hero-carousel .item{padding-bottom:0;}
    #shopify-section-{{ section.id }} .hero-carousel .mobile-image{display:block;}
    /*#shopify-section-{{ section.id }} .hero-carousel .desktop-image{display:none;}*/
    
    #shopify-section-{{ section.id }} .hero-carousel .captions {width:100%;height:100%;background:none;padding:1.5em}
    #shopify-section-{{ section.id }} .hero-carousel .captions.h-center {left:0}
    #shopify-section-{{ section.id }} .hero-carousel p {font-size:4vw}
    #shopify-section-{{ section.id }} .hero-carousel p {font-size:{{section.settings.text_size}}vw;}    

    
    #shopify-section-{{ section.id }} .hero-carousel .captions .table .table-cell > div {/*background:rgba(255,255,255,0.75);padding:5px;box-sizing:border-box*/}
    
    #shopify-section-{{ section.id }} .hero-carousel .captions.v-center {top:0}
  }
  
  @media all and (min-width: 601px) {
	#shopify-section-{{ section.id }} {display:none}    
  }
  
    
</style>

<div class="hero-carousel {% unless section.settings.full_width %}container{% endunless %} custom-cursor">
  {% for block in section.blocks %}
      <div class="item" id="{{ block.id }}">
        {% if block.settings.link != blank %}
          <a href="{{block.settings.link}}" class="custom-cursor slide-link">
          </a>
        {% endif %}
            
            {% if block.settings.image != blank %}
            {% assign img_url = block.settings.image | img_url: 'master' %}
            {% else %}
            {% assign img_url = "placeholder-image.jpg" | asset_url %}
            {% endif %}
           
            <div class="item_img desktop-image normal" style="background-image: url({{ img_url }});"></div>
                        
            <div class="overlay overlay-{{forloop.index}}" style="background-color: rgba({{block.settings.overlay_color}});">
                  {% if block.settings.show_captions %}
                  <div class="captions text-{{block.settings.text_align}}" style="{% if block.settings.text_align == "left" %}margin-right:auto;{% elsif block.settings.text_align == "right" %}margin-left:auto;{% else %}margin-left: auto; margin-right: auto;{% endif %}">
                    <div class="table">
                      <div class="table-cell text-vertical-{{block.settings.text_vertical_align}}">
                        {% if block.settings.title != "" %}
                        <h1 class="title {% if forloop.first %}animated {{block.settings.title_effect}}{% else %}{% if block.settings.title_effect != "" %}invisible{% endif %}{% endif %}" {% if block.settings.title_effect != "" %}data-effect="{{block.settings.title_effect}}"{% endif %}>{{ block.settings.title }}</h1>
                        {% endif %}
                        {% if block.settings.text != "" %}
                        <div style="margin-left:{{block.settings.text_margin_left}}px;margin-right:{{block.settings.text_margin_right}}px" class="text {% if forloop.first %}animated {{block.settings.text_effect}}{% else %}{% if block.settings.text_effect != "" %}invisible{% endif %}{% endif %}" {% if block.settings.text_effect != "" %}data-effect="{{block.settings.text_effect}}"{% endif %}>{{ block.settings.text }}</div>
                        {% endif %}
                        {% if block.settings.button != "" %}
                        <a href="{{ block.settings.link }}" class="custom-cursor">
                          <button class="custom-cursor btn {% if forloop.first %}animated {{block.settings.button_effect}}{% else %}{% if block.settings.button_effect != "" %}invisible{% endif %}{% endif %}" {% if block.settings.button_effect != "" %}data-effect="{{block.settings.button_effect}}"{% endif %}>{{ block.settings.button }}</button>
                        </a>
                        {% endif %}
                      </div>
                    </div>
                  </div>
                  {% endif %}
                  {% if block.settings.featured_image != blank %}
                  <div class="featured-img desktop-image {% if section.settings.full_height %}full-height{% endif %}{% if forloop.first %}animated {{block.settings.image_effect}}{% else %}{% if block.settings.image_effect != "" %}invisible{% endif %}{% endif %}" {% if block.settings.image_effect != "" %}data-effect="{{block.settings.image_effect}}"{% endif %} style="background-image: url({{ block.settings.featured_image | img_url: 'master' }}); background-position: {{block.settings.featured_image_position}}; width: {{block.settings.featured_image_width}}; right: {{block.settings.featured_image_right}}; left: {{block.settings.featured_image_left}};"></div>
                  {% endif %}
            </div>
      </div>
  {% endfor %}
</div>
<script>
  $(function(){
    {% if section.settings.full_height %}
      {% if headerMode == "over" %}
        $('.hero-carousel .item_img.full-height').height($(window).height());
        $(window).resize(function(){
          $('.hero-carousel .item_img.full-height').height($(window).height());
        });
      {% else %}
    	$('.hero-carousel .item_img.full-height').height($(window).height() - $('.header.main').height());
        $(window).resize(function(){
          $('.hero-carousel .item_img.full-height').height($(window).height() - $('.header.main').height());
        });
      {% endif %}
    {% endif %}
   });
</script>